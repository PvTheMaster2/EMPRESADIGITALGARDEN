<!DOCTYPE html>
<html lang="pt-BR" class="theme-dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title or page.fileSlug }} - {{ site.title }}</title>
  <meta name="description" content="{{ description or site.description }}" />
  
  <!-- CSS do tema Obsidian e customiza√ß√µes -->
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/sidebar.css" />
  <link rel="stylesheet" href="/styles/reuniao.css" />
  
  <!-- Favicon e meta tags para PWA -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
  <meta name="theme-color" content="#1e1e1e" />
</head>
<body class="layout-reuniao">
  
  <header class="site-header">
    <nav class="main-navigation">
      <div class="nav-brand">
        <button class="mobile-sidebar-toggle" onclick="toggleSidebar()">
          <span class="hamburger"></span>
        </button>
        <a href="/" class="brand-link">
          üå± {{ site.title }}
        </a>
      </div>
      
      <div class="nav-links">
        <a href="/">Dashboard</a>
        <a href="/1-Governanca/README/">Governan√ßa</a>
        <a href="/4-Projetos/README/">Projetos</a>
        <a href="/2-Equipes/README/">Equipes</a>
        <a href="/5-Processos/README/">Processos</a>
        <a href="/6-Reunioes/README/" class="active">Reuni√µes</a>
        <a href="/7-Conhecimento/README/">Conhecimento</a>
      </div>
      
      <div class="nav-tools">
        <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
        <button class="search-toggle" onclick="toggleSearch()">üîç</button>
      </div>
    </nav>
  </header>

  <!-- Sidebar Navigation -->
  <aside class="sidebar" data-state="closed" aria-hidden="true">
    <div class="sidebar-header">
      <button class="sidebar-toggle" onclick="toggleSidebar()">
        <span class="hamburger"></span>
      </button>
      <div class="sidebar-brand">
        <a href="/" class="brand-link">üå± Multisocios</a>
      </div>
    </div>
    
    <div class="sidebar-content">
      <div class="sidebar-search">
        <input type="search" placeholder="Buscar conte√∫do..." class="search-input" id="sidebar-search">
      </div>
      
      <div class="sidebar-tree">
        {% set navData = navigation.tree %}
        {% for item in navData %}
        <div class="tree-item" data-level="0">
          <div class="tree-node">
            <button class="tree-toggle" onclick="toggleTreeNode(this)" {% if not item.children %}style="visibility: hidden;"{% endif %}>
              <span class="tree-icon">‚ñ∂</span>
            </button>
            <a href="{{ item.url }}" class="tree-link {% if page.url == item.url %}active{% endif %}">
              <span class="tree-label">{{ item.title }}</span>
            </a>
          </div>
          
          {% if item.children %}
          <div class="tree-children" style="display: none;">
            {% for child in item.children %}
            <div class="tree-item" data-level="1">
              <div class="tree-node">
                <button class="tree-toggle" onclick="toggleTreeNode(this)" {% if not child.children %}style="visibility: hidden;"{% endif %}>
                  <span class="tree-icon">‚ñ∂</span>
                </button>
                <a href="{{ child.url }}" class="tree-link {% if page.url == child.url %}active{% endif %}">
                  <span class="tree-label">{{ child.title }}</span>
                </a>
              </div>
              
              {% if child.children %}
              <div class="tree-children" style="display: none;">
                {% for subchild in child.children %}
                <div class="tree-item" data-level="2">
                  <div class="tree-node">
                    <button class="tree-toggle" style="visibility: hidden;">
                      <span class="tree-icon">‚ñ∂</span>
                    </button>
                    <a href="{{ subchild.url }}" class="tree-link {% if page.url == subchild.url %}active{% endif %}">
                      <span class="tree-label">{{ subchild.title }}</span>
                    </a>
                  </div>
                </div>
                {% endfor %}
              </div>
              {% endif %}
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </div>
  </aside>

  <!-- Overlay para mobile -->
  <div class="sidebar-overlay" aria-hidden="true"></div>

  <!-- Main Content -->
  <main id="main" class="site-main" tabindex="-1">
    <div class="content-wrapper">
      
      <!-- Breadcrumbs -->
      {% if page.url != '/' and eleventyNavigation %}
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <ol>
          <li><a href="/">üè† Home</a></li>
          <li><a href="/reunioes/">üìÖ Reuni√µes</a></li>
          {% set breadcrumbNav = collections.all | eleventyNavigationBreadcrumb(eleventyNavigation.key) %}
          {% for crumb in breadcrumbNav %}
            <li>
              {% if loop.last %}
                <span aria-current="page">{{ crumb.title }}</span>
              {% else %}
                <a href="{{ crumb.url }}">{{ crumb.title }}</a>
              {% endif %}
            </li>
          {% endfor %}
        </ol>
      </nav>
      {% endif %}

      <!-- Meeting Header -->
      <article class="meeting-page">
        <header class="meeting-header">
          {% if title %}
          <h1 class="meeting-title">{{ title }}</h1>
          {% endif %}
          
          <!-- Meeting Status Bar -->
          <div class="meeting-status-bar">
            {% if status %}
            <div class="status-badge status-{{ status | slugify }}">
              {% if status == "scheduled" %}üìÖ Agendada{% endif %}
              {% if status == "in-progress" %}‚è≥ Em Andamento{% endif %}
              {% if status == "completed" %}‚úÖ Conclu√≠da{% endif %}
              {% if status == "cancelled" %}‚ùå Cancelada{% endif %}
              {% if status == "postponed" %}‚è∏Ô∏è Adiada{% endif %}
            </div>
            {% endif %}
            
            {% if category %}
            <div class="category-badge category-{{ category | slugify }}">
              {% if category == "executiva" %}üëî Executiva{% endif %}
              {% if category == "tecnica" %}üîß T√©cnica{% endif %}
              {% if category == "comercial" %}üíº Comercial{% endif %}
              {% if category == "planejamento" %}üìã Planejamento{% endif %}
              {% if category == "revisao" %}üîç Revis√£o{% endif %}
            </div>
            {% endif %}
            
            {% if priority %}
            <div class="priority-badge priority-{{ priority | slugify }}">
              {% if priority == "high" %}üî¥ Alta{% endif %}
              {% if priority == "medium" %}üü° M√©dia{% endif %}
              {% if priority == "low" %}üü¢ Baixa{% endif %}
              {% if priority == "urgent" %}‚ö´ Urgente{% endif %}
            </div>
            {% endif %}
          </div>
        </header>

        <!-- Meeting Info Cards -->
        <div class="meeting-info-grid">
          
          <!-- Date & Time Card -->
          {% if meeting_date or duration %}
          <div class="info-card datetime-card">
            <div class="card-icon">üìÖ</div>
            <div class="card-content">
              <h3>Data & Hor√°rio</h3>
              {% if meeting_date %}
              <div class="info-item">
                <span class="info-label">Data:</span>
                <span class="info-value">{{ meeting_date | date("DD/MM/YYYY") }}</span>
              </div>
              {% endif %}
              {% if duration %}
              <div class="info-item">
                <span class="info-label">Dura√ß√£o:</span>
                <span class="info-value">{{ duration }}</span>
              </div>
              {% endif %}
              {% if location %}
              <div class="info-item">
                <span class="info-label">Local:</span>
                <span class="info-value">{{ location }}</span>
              </div>
              {% endif %}
            </div>
          </div>
          {% endif %}

          <!-- Participants Card -->
          {% if participants and participants.length > 0 %}
          <div class="info-card participants-card">
            <div class="card-icon">üë•</div>
            <div class="card-content">
              <h3>Participantes ({{ participants.length }})</h3>
              <div class="participants-list">
                {% for participant in participants %}
                <div class="participant-badge">
                  <span class="participant-avatar">{{ participant | first }}</span>
                  <span class="participant-name">{{ participant | replace("[[", "") | replace("]]", "") }}</span>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
          {% endif %}

          <!-- Meeting Details Card -->
          <div class="info-card details-card">
            <div class="card-icon">üìã</div>
            <div class="card-content">
              <h3>Detalhes</h3>
              {% if meeting_id %}
              <div class="info-item">
                <span class="info-label">ID:</span>
                <span class="info-value">{{ meeting_id }}</span>
              </div>
              {% endif %}
              {% if owner %}
              <div class="info-item">
                <span class="info-label">Facilitador:</span>
                <span class="info-value">{{ owner | replace("[[", "") | replace("]]", "") }}</span>
              </div>
              {% endif %}
              {% if follow_up_required %}
              <div class="info-item">
                <span class="info-label">Follow-up:</span>
                <span class="info-value">{% if follow_up_required %}‚úÖ Necess√°rio{% else %}‚ùå N√£o{% endif %}</span>
              </div>
              {% endif %}
            </div>
          </div>

          <!-- Status Card -->
          {% if created or modified %}
          <div class="info-card status-card">
            <div class="card-icon">‚è±Ô∏è</div>
            <div class="card-content">
              <h3>Timeline</h3>
              {% if created %}
              <div class="info-item">
                <span class="info-label">Criado:</span>
                <span class="info-value">{{ created | date("DD/MM/YYYY") }}</span>
              </div>
              {% endif %}
              {% if modified %}
              <div class="info-item">
                <span class="info-label">Modificado:</span>
                <span class="info-value">{{ modified | date("DD/MM/YYYY") }}</span>
              </div>
              {% endif %}
              {% if updated %}
              <div class="info-item">
                <span class="info-label">Atualizado:</span>
                <span class="info-value">{{ updated | date("DD/MM/YYYY HH:mm") }}</span>
              </div>
              {% endif %}
            </div>
          </div>
          {% endif %}

        </div>

        <!-- Meeting Content -->
        <div class="meeting-content">
          {{ content | safe }}
        </div>

        <!-- Action Items Section -->
        {% if follow_up_required %}
        <div class="action-items-section">
          <h2>üìã Pr√≥ximos Passos</h2>
          <div class="action-items-notice">
            <div class="notice-icon">‚ö†Ô∏è</div>
            <div class="notice-content">
              <strong>Follow-up necess√°rio!</strong>
              <p>Esta reuni√£o requer acompanhamento. Verifique as a√ß√µes definidas no conte√∫do acima.</p>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Related Meetings -->
        <div class="related-meetings">
          <h3>üîó Reuni√µes Relacionadas</h3>
          <div class="related-links">
            {% set relatedMeetings = collections.all | filterByTags("meeting") | limit(5) %}
            {% for meeting in relatedMeetings %}
              {% if meeting.url != page.url %}
              <a href="{{ meeting.url }}" class="related-link">
                <div class="related-icon">üìÖ</div>
                <div class="related-info">
                  <div class="related-title">{{ meeting.data.title or meeting.fileSlug }}</div>
                  <div class="related-date">{{ meeting.data.meeting_date | date("DD/MM/YYYY") }}</div>
                </div>
              </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>

      </article>
    </div>
  </main>

  <!-- JavaScript -->
  <script src="/scripts/main.js"></script>
  <script src="/scripts/sidebar.js" defer></script>
  <script>
    // Meeting-specific JavaScript
    document.addEventListener('DOMContentLoaded', function() {
      // Highlight meeting navigation
      const meetingNav = document.querySelector('.nav-links a[href="/reunioes/"]');
      if (meetingNav) {
        meetingNav.classList.add('active');
      }
      
      // Animate info cards
      const infoCards = document.querySelectorAll('.info-card');
      infoCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('animate-in');
      });
      
      // Auto-generate participant avatars
      const participantBadges = document.querySelectorAll('.participant-badge');
      participantBadges.forEach(badge => {
        const avatar = badge.querySelector('.participant-avatar');
        const name = badge.querySelector('.participant-name').textContent;
        avatar.textContent = name.charAt(0).toUpperCase();
      });
    });
  </script>
</body>
</html>
