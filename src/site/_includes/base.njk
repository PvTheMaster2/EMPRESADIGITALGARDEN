<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title or meta.pages.home.title or "Digital Garden Empresarial" }}</title>
    <meta name="description" content="{{ description or meta.pages.home.description or "Sistema de Gest√£o de Conhecimento Empresarial" }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/styles/main.css">
    
    <!-- Meta tags -->
    <meta property="og:title" content="{{ title or meta.pages.home.title }}">
    <meta property="og:description" content="{{ description or meta.pages.home.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ meta.site.url }}{{ page.url }}">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/styles/main.css" as="style">
    
    <!-- Structured data -->
    <script type="application/ld+json">
    {{ meta.schema.website | jsonify | safe }}
    </script>
</head>
<body class="theme-light">
    <!-- Header -->
    <header class="site-header">
        <nav class="main-nav">
            <div class="nav-container">
                <a href="/" class="logo">
                    <span class="logo-icon">üè¢</span>
                    <span class="logo-text">Digital Garden</span>
                </a>
                
                <div class="nav-links">
                    {% for item in navigation.main %}
                        {% if item.children %}
                            <div class="nav-dropdown">
                                <a href="{{ item.url }}" class="nav-link">{{ item.title }}</a>
                                <div class="nav-dropdown-content">
                                    {% for child in item.children %}
                                        <a href="{{ child.url }}" class="nav-dropdown-link">
                                            <span class="nav-dropdown-title">{{ child.title }}</span>
                                            {% if child.description %}
                                                <span class="nav-dropdown-desc">{{ child.description }}</span>
                                            {% endif %}
                                        </a>
                                    {% endfor %}
                                </div>
                            </div>
                        {% else %}
                            <a href="{{ item.url }}" class="nav-link">{{ item.title }}</a>
                        {% endif %}
                    {% endfor %}
                </div>
                
                <div class="nav-actions">
                    <button class="search-toggle" onclick="toggleSearch()">
                        <span class="search-icon">üîç</span>
                    </button>
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <span class="theme-icon">üåô</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Search overlay -->
    <div id="search-overlay" class="search-overlay">
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Buscar no Digital Garden..." class="search-input">
            <div id="search-results" class="search-results"></div>
            <button class="search-close" onclick="toggleSearch()">‚úï</button>
        </div>
    </div>

    <!-- Main content -->
    <main class="main-content">
        <div class="content-wrapper">
            <!-- Breadcrumb -->
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item">
                        <a href="/" class="breadcrumb-link">Home</a>
                    </li>
                    {% if page.url != "/" %}
                        {% for item in breadcrumb %}
                            <li class="breadcrumb-item">
                                <a href="{{ item.url }}" class="breadcrumb-link">{{ item.title }}</a>
                            </li>
                        {% endfor %}
                    {% endif %}
                </ol>
            </nav>

            <!-- Page content -->
            <article class="page-content">
                {% if title %}
                    <header class="page-header">
                        <h1 class="page-title">{{ title }}</h1>
                        {% if description %}
                            <p class="page-description">{{ description }}</p>
                        {% endif %}
                        {% if date %}
                            <time class="page-date" datetime="{{ date | isoDate }}">{{ date | dateToZulu }}</time>
                        {% endif %}
                    </header>
                {% endif %}

                <div class="content">
                    {{ content | safe }}
                </div>
            </article>

            <!-- Table of contents -->
            {% if toc %}
                <aside class="table-of-contents">
                    <nav class="toc-nav">
                        <h3 class="toc-title">√çndice</h3>
                        {{ toc | safe }}
                    </nav>
                </aside>
            {% endif %}
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-sections">
                    {% for section in navigation.footer %}
                        <div class="footer-section">
                            <h4 class="footer-section-title">{{ section.title }}</h4>
                            <ul class="footer-section-links">
                                {% for item in section.items %}
                                    <li><a href="{{ item.url }}" class="footer-link">{{ item.title }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endfor %}
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 {{ company.name }}. Todos os direitos reservados.</p>
                    <p>Desenvolvido com ‚ù§Ô∏è usando Eleventy e Obsidian</p>
                    <p class="footer-stats">
                        <span>{{ computed.stats.totalAreas }} √°reas</span> ‚Ä¢ 
                        <span>{{ computed.stats.totalProjects }} projetos</span> ‚Ä¢ 
                        <span>{{ computed.stats.totalFiles }} documentos</span>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/scripts/main.js"></script>
    <script src="/scripts/search.js"></script>
    <script src="/scripts/theme.js"></script>
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>
